(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{539:function(e,t,n){"use strict";n.r(t);n(11),n(7),n(129),n(5),n(4),n(6),n(59);var o=n(16),r=(n(56),n(223),n(0)),l=n(429),c=n(47);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var h={middleware:"check_auth",components:{Slider:l.a,SliderItem:l.b},created:function(){this.$store.state.editing_obj&&(this.journey=Object.assign({},this.$store.getters.editing_obj),this.imageData1=this.journey.jophoto1,this.imageData2=this.journey.jophoto2,this.journey.ishighlight?this.journey.ishighlight=!0:this.journey.ishighlight=!1,this.journey.isprivate?this.journey.isprivate=!0:this.journey.isprivate=!1,this.journey.isevent?this.journey.isevent=!0:this.journey.isevent=!1)},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(c.c)(["editing_obj"])),data:function(){return{journey:{username:this.$store.state.auth.user.user.username,jocontent:"",joevent:"",jodate:"",jophoto1:"",jophoto2:"",jolink:"",ishighlight:!1,isprivate:!1},progressbar:!1,date:"",slide:null,imageData1:"",imageData2:"",e6:1,linkError:"",model:"",valid_snackbar:!1}},methods:{checkLink:function(){var e=this.journey.jolink;if(e)if(!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(this.journey.jolink)){var t=e.startsWith("http");console.log("checkStartsHttp",t),t||(console.log("doesn't start with http"),console.log("url",this.journey.jolink),this.journey.jolink="http://"+this.journey.jolink,console.log("url",this.journey.jolink),this.linkError="")}else this.linkError="Enter a valid URL."},goback:function(){this.$store.dispatch("remove_editing_obj"),window.history.back()},onPick:function(e){switch(e){case 1:this.$refs.fileInput1.click();break;case 2:this.$refs.fileInput2.click();break;case 3:this.$refs.fileInput3.click();break;case 4:this.$refs.fileInput4.click();break;case 5:this.$refs.fileInput5.click()}},removeImage:function(e){switch(e){case 1:this.imageData1="",this.journey.jophoto1=null;break;case 2:this.imageData2="",this.journey.jophoto2=null,console.log(this.journey)}},onFileChange1:function(e){var t=this,n=e.target.files||e.dataTransfer.files;if(n){var o=new FileReader;o.onload=function(e){t.imageData1=e.target.result},o.readAsDataURL(n[0]),this.journey.jophoto1=n[0]}},onFileChange2:function(e){var t=this,n=e.target.files||e.dataTransfer.files;if(n){var o=new FileReader;o.onload=function(e){t.imageData2=e.target.result},o.readAsDataURL(n[0]),this.journey.jophoto2=n[0]}},openlink:function(){var e=this.journey.jolink;window.open(e,"_blank").focus()},refresh:function(){this.date="",this.imageData1="",this.imageData2="",this.journey.username=this.$store.state.auth.user.user.username,this.journey.jocontent="",this.journey.joevent="",this.journey.jodate="",this.journey.jophoto1=null,this.journey.jophoto2=null,this.journey.jolink="",this.journey.ishighlight=!1,this.journey.isprivate=!1},submit:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""==e.journey.joevent||!e.journey.jophoto1){t.next=22;break}for(data in e.progressbar=!0,n={headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+e.$store.state.auth.user.access_token}},o=new FormData,e.journey)o.append(data,e.journey[data]);return t.prev=5,t.next=8,e.$axios.$post("/v1/artist/journey/",o,n);case 8:t.sent,e.$store.dispatch("check_user_journey"),e.refresh(),e.progressbar=!1,e.snackbar=!0,e.$router.push("/"+e.$store.state.auth.user.user.username+"/journey"),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(5),e.progressbar=!1,console.log(t.t0);case 20:t.next=23;break;case 22:e.valid_snackbar=!0;case 23:case"end":return t.stop()}}),t,null,[[5,16]])})))()},update:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,r,l,c,v,h,i,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""==e.journey.joevent||!e.journey.jophoto1){t.next=40;break}e.progressbar=!0,n={headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+e.$store.state.auth.user.access_token}},o=e.editing_obj,r=e.journey,l=Object.keys(o),c=Object.keys(r),v=Object.values(o),h=Object.values(r),t.prev=9,i=0;case 11:if(!(i<l.length)){t.next=26;break}if(l[i]!=c[i]||v[i]!=h[i]){t.next=16;break}console.log(" value not changed for: ",l[i]+" -> "+h[i]),t.next=23;break;case 16:return(d=new FormData).append(l[i],h[i]),d.append("id",e.journey.id),console.log("key obj1: "+l[i]+"\nkeyobj2: "+c[i]+"\n myObj1 value: "+v[i]+"\nmyObj2 value: "+h[i]+"\n"),t.next=22,e.$axios.$patch("/v1/artist/journey/"+e.editing_obj.id,d,n);case 22:console.log(h[i]," changed");case 23:i++,t.next=11;break;case 26:e.$store.dispatch("check_user_journey"),e.$store.dispatch("remove_editing_obj"),e.refresh(),e.progressbar=!1,e.snackbar=!0,t.next=37;break;case 33:t.prev=33,t.t0=t.catch(9),console.log("error",t.t0),e.progressbar=!1;case 37:e.$router.push("/"+e.$store.state.auth.user.user.username+"/journey"),t.next=41;break;case 40:e.valid_snackbar=!0;case 41:case"end":return t.stop()}}),t,null,[[9,33]])})))()}}},d=n(21),j=n(24),m=n.n(j),y=n(353),_=n(343),f=n(348),k=n(349),x=n(519),w=n(98),C=n(222),$=n(341),O=n(460),D=n(461),S=n(352),V=n(551),P=n(552),I=n(373),R=n(351),z=n(474),E=n(475),F=n(476),T=n(367),A=n(384),L=n(432),component=Object(d.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-container",{staticClass:"ma-24"},[n("div",{staticClass:"text-xs-center mb-6",attrs:{align:"center"}},[n("v-btn",{staticClass:"elevation-0 white text-decoration-none float-left",attrs:{icon:""},on:{click:function(t){return e.goback()}}},[n("v-icon",[e._v("mdi-arrow-left")])],1)],1),e._v(" "),n("v-row",{staticClass:"mx-2"},[n("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:"6"}},[n("h3",{staticClass:"ma-4"},[e._v("Share your journey")]),e._v(" "),n("v-stepper",{attrs:{vertical:""},model:{value:e.e6,callback:function(t){e.e6=t},expression:"e6"}},[n("v-stepper-step",{attrs:{complete:e.e6>1,step:"1"}},[e._v("\n                Share images* \n                ")]),e._v(" "),n("v-stepper-content",{staticClass:"ma-0",attrs:{step:"1",width:"100%"}},[n("v-slide-group",{staticClass:"py-4 ma-0",attrs:{"min-width":"2px","show-arrows":""},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},[n("v-slide-item",[n("div",{staticClass:" rounded-lg grey lighten-4"},[n("v-img",{attrs:{src:e.imageData1,height:"150px",width:"150px"}}),e._v(" "),n("v-btn",{attrs:{icon:""}},[n("v-icon",{attrs:{color:"indigo",small:""},on:{click:function(t){return e.onPick(1)}}},[e._v("mdi-image-plus")])],1),e._v(" "),n("input",{ref:"fileInput1",staticStyle:{display:"none"},attrs:{type:"file",name:"gallery",accept:"image/*",required:""},on:{change:e.onFileChange1}}),e._v(" "),n("v-btn",{attrs:{icon:""}},[n("v-icon",{attrs:{color:"error",small:""},on:{click:function(t){return e.removeImage(1)}}},[e._v("mdi-delete-outline")])],1)],1)]),e._v(" "),e.imageData1?n("v-slide-item",[n("div",{staticClass:"mx-2 rounded-lg grey lighten-4"},[n("v-img",{attrs:{src:e.imageData2,height:"150px",width:"150px"}}),e._v(" "),n("v-btn",{attrs:{icon:""}},[n("v-icon",{attrs:{color:"indigo",small:""},on:{click:function(t){return e.onPick(2)}}},[e._v("mdi-image-plus")])],1),e._v(" "),n("input",{ref:"fileInput2",staticStyle:{display:"none"},attrs:{type:"file",name:"gallery",accept:"image/*",required:""},on:{change:e.onFileChange2}}),e._v(" "),n("v-btn",{attrs:{icon:""}},[n("v-icon",{attrs:{color:"error",small:""},on:{click:function(t){return e.removeImage(2)}}},[e._v("mdi-delete-outline")])],1)],1)]):e._e()],1),e._v(" "),n("v-btn",{attrs:{color:"indigo",text:"",outlined:""},on:{click:function(t){e.e6=2}}},[e._v("Continue")]),e._v(" "),n("v-btn",{attrs:{text:""},on:{click:e.goback}},[e._v("Cancel")])],1),e._v(" "),n("v-stepper-step",{attrs:{complete:e.e6>2,step:"2"}},[e._v("Caption")]),e._v(" "),n("v-stepper-content",{staticClass:"ma-0",attrs:{step:"2"}},[n("v-text-field",{attrs:{label:"Title*",rules:[function(){return!!e.journey.joevent||"This field is required"}],maxlength:50},model:{value:e.journey.joevent,callback:function(t){e.$set(e.journey,"joevent",t)},expression:"journey.joevent"}}),e._v(" "),n("v-textarea",{attrs:{label:"Caption"},model:{value:e.journey.jocontent,callback:function(t){e.$set(e.journey,"jocontent",t)},expression:"journey.jocontent"}}),e._v(" "),n("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.date,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(t){e.date=t},"update:return-value":function(t){e.date=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,r=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{label:"Date","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.journey.jodate,callback:function(t){e.$set(e.journey,"jodate",t)},expression:"journey.jodate"}},"v-text-field",r,!1),o))]}}])},[e._v(" "),n("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.journey.jodate,callback:function(t){e.$set(e.journey,"jodate",t)},expression:"journey.jodate"}},[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{text:"",color:"indigo"},on:{click:function(t){e.menu=!1}}},[e._v("Cancel")]),e._v(" "),n("v-btn",{attrs:{text:"",color:"indigo"},on:{click:function(t){return e.$refs.menu.save(e.date)}}},[e._v("OK")])],1)],1),e._v(" "),n("v-text-field",{attrs:{"error-messages":e.linkError,label:"Add a link",maxlength:50},on:{change:e.checkLink},model:{value:e.journey.jolink,callback:function(t){e.$set(e.journey,"jolink",t)},expression:"journey.jolink"}}),e._v(" "),n("v-btn",{attrs:{color:"indigo",text:"",outlined:""},on:{click:function(t){e.e6=3}}},[e._v("Continue")]),e._v(" "),n("v-btn",{attrs:{color:"indigo",text:""},on:{click:function(t){e.e6=1}}},[e._v("Previous")]),e._v(" "),n("v-btn",{attrs:{text:""},on:{click:e.goback}},[e._v("Cancel")])],1),e._v(" "),n("v-stepper-step",{attrs:{complete:e.e6>3,step:"3"}},[e._v("Privacy")]),e._v(" "),n("v-stepper-content",{staticClass:"ma-0",attrs:{step:"3"}},[n("h4",{staticClass:"font-weight-light"},[e._v("Add to highlights")]),e._v(" "),n("v-radio-group",{attrs:{row:""},model:{value:e.journey.ishighlight,callback:function(t){e.$set(e.journey,"ishighlight",t)},expression:"journey.ishighlight"}},[n("v-radio",{attrs:{label:"Yes",value:!0}}),e._v(" "),n("v-radio",{attrs:{label:"No",value:!1}})],1),e._v(" "),n("h4",{staticClass:"font-weight-light"},[e._v("Do you want to keep it private?")]),e._v(" "),n("v-radio-group",{attrs:{row:""},model:{value:e.journey.isprivate,callback:function(t){e.$set(e.journey,"isprivate",t)},expression:"journey.isprivate"}},[n("v-radio",{attrs:{label:"Yes",value:!0}}),e._v(" "),n("v-radio",{attrs:{label:"No",value:!1}})],1),e._v(" "),e.editing_obj?n("v-btn",{staticClass:"text-decoration-none",attrs:{outlined:"",small:"",color:"indigo",dark:"",loading:e.progressbar},on:{click:e.update}},[e._v("Update")]):n("v-btn",{staticClass:"text-decoration-none",attrs:{outlined:"",small:"",color:"indigo",dark:"",loading:e.progressbar},on:{click:e.submit}},[e._v("Submit")]),e._v(" "),n("v-btn",{attrs:{color:"indigo",text:""},on:{click:function(t){e.e6=2}}},[e._v("Previous")]),e._v(" "),n("v-btn",{attrs:{text:""},on:{click:e.goback}},[e._v("Cancel")])],1)],1)],1),e._v(" "),n("v-col",{staticClass:"px-sm-8 lighten-4 rounded-xl",attrs:{cols:"12",md:"6"}},[n("h3",{staticClass:"ma-4"},[e._v("Preview your journey")]),e._v(" "),e.journey.jodate?n("v-row",{staticClass:"pb-2"},[n("caption",{staticClass:"ma-6"},[e._v(e._s(e.journey.jodate)+" ")])]):e._e(),e._v(" "),e.journey.joevent?n("v-row",{staticClass:"pb-6 justify-center text-center"},[n("h3",{staticClass:"text-center"},[e._v(e._s(e.journey.joevent)+" ")])]):e._e(),e._v(" "),n("client-only",[e.imageData1?n("Slider",{attrs:{autoplay:!1,width:"520px",height:"500px"}},[e.imageData1?n("div",[n("SliderItem",[n("v-img",{attrs:{src:e.imageData1,contain:"",height:"500px",width:"800px"}})],1)],1):e._e(),e._v(" "),e.imageData2?n("div",[n("SliderItem",[n("v-img",{attrs:{src:e.imageData2,contain:"",height:"500px",width:"800px"}})],1)],1):e._e()]):e._e()],1),e._v(" "),e.journey.jocontent?n("v-row",{staticClass:"pb-6 pt-4 justify-center text-center"},[n("h4",{staticClass:" text-center"},[e._v(" "+e._s(e.journey.username)+": "+e._s(e.journey.jocontent)+" ")])]):e._e(),e._v(" "),e.journey.jolink?n("v-row",{staticClass:"pb-6 justify-center text-center"},[e.journey.jolink?n("v-btn",{attrs:{icon:"",color:"indigo"},on:{click:e.openlink}},[n("v-icon",[e._v("mdi-link")])],1):e._e(),e._v(" "),e.journey.ishighlight?n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",r,!1),o),[n("v-icon",{staticClass:"pl-2 float-right",attrs:{yellow:"",small:""}},[e._v("mdi-star")])],1)]}}],null,!1,930810606)},[e._v(" "),n("span",[e._v("This is a highlighted post.")])]):e._e(),e._v(" "),e.journey.isprivate?n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",r,!1),o),[n("v-icon",{staticClass:"pl-2 float-right",attrs:{small:""}},[e._v("mdi-lock")])],1)]}}],null,!1,976522787)},[e._v(" "),n("span",[e._v("This is your private post.")])]):e._e()],1):e._e()],1)],1),e._v(" "),n("v-snackbar",{model:{value:e.valid_snackbar,callback:function(t){e.valid_snackbar=t},expression:"valid_snackbar"}},[e._v("\n            Please fill the required details.\n        ")])],1)],1)}),[],!1,null,null,null);t.default=component.exports;m()(component,{VApp:y.a,VBtn:_.a,VCol:f.a,VContainer:k.a,VDatePicker:x.a,VIcon:w.a,VImg:C.a,VMenu:$.a,VRadio:O.a,VRadioGroup:D.a,VRow:S.a,VSlideGroup:V.a,VSlideItem:P.a,VSnackbar:I.a,VSpacer:R.a,VStepper:z.a,VStepperContent:E.a,VStepperStep:F.a,VTextField:T.a,VTextarea:A.a,VTooltip:L.a})}}]);