(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{769:function(t,e,n){var content=n(875);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(13).default)("5b920054",content,!0,{sourceMap:!1})},874:function(t,e,n){"use strict";n(769)},875:function(t,e,n){(e=n(12)(!1)).push([t.i,".wrap-text[data-v-d428f14a]{white-space:normal}",""]),t.exports=e},937:function(t,e,n){"use strict";n.r(e);n(10),n(9),n(8),n(39),n(113),n(7),n(6);var o=n(27),r=(n(66),n(24)),c=n(1),l=n(35),v=n(2),_=n.n(v),m=n(58);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var h={middleware:"check_auth",computed:f(f({},Object(l.c)(["loggedInUser","isAuthenticated"])),{},{filteredNotifications:function(){if(this.notifications)return this.notifications.filter((function(t){return 0==t.is_seen}))},filteredNotificationsOld:function(){if(this.notifications)return this.notifications.filter((function(t){return 1==t.is_seen}))}}),created:function(){this.isAuthenticated&&this.getnotifications()},methods:{moment:function(t){return _()(t).fromNow()},exactmoment:function(t){return _()(t).format("lll")},getnotifications:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={headers:{"content-type":"multipart/form-data",Authorization:t.$auth.strategy.token.get()}},e.next=4,m.a.getNotificationsSharing(t.loggedInUser.username,n);case 4:o=e.sent,t.notifications=o.data.results,t.notifications=t.notifications.filter((function(e){return e.sender!=t.loggedInUser.username})),t.page=o.data.next,t.firstLoad=!1,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},seen:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var o,r,c,l,i,form;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.e1t1object?e.$router.push("/e1t1/"+t.e1t1object):t.guestobject?e.$router.push("/events/"+t.guestobject.event):t.cookingobject&&e.$router.push("/whatiscooking/"+t.cookingobject),o=e.filteredNotifications,r=[],t.e1t1object)r=o.filter((function(e){return e.e1t1object==t.e1t1object}));else if(t.guestobject&&t.guestobject.event)for(c=0;c<o.length;c++)o[c].guestobject&&o[c].guestobject.event&&o[c].guestobject.event==t.guestobject.event&&r.push(o[c]);else t.cookingobject&&(r=o.filter((function(e){return e.cookingobject==t.cookingobject})));l={"content-type":"multipart/form-data",headers:{Authorization:e.$auth.strategy.token.get()}},n.prev=5,i=0;case 7:if(!(i<r.length)){n.next=15;break}return(form=new FormData).append("is_seen","true"),n.next=12,e.$axios.$put("/v1/notifications/e1t1/"+r[i].id,form,l);case 12:i++,n.next=7;break;case 15:n.next=20;break;case 17:n.prev=17,n.t0=n.catch(5),console.log("error..",n.t0.response);case 20:e.$store.dispatch("check_notifications");case 21:case"end":return n.stop()}}),n,null,[[5,17]])})))()},opene1t1:function(t){console.log(t),t.e1t1object?this.$router.push("/e1t1/"+t.e1t1object):t.cookingobject?this.$router.push("/whatiscooking/"+t.cookingobject):t.guestobject&&this.$router.push("/events/"+t.guestobject.event)},infiniteScrolling:function(t,e,n){var r=this;if(this.page){var c={headers:{"content-type":"multipart/form-data",Authorization:this.$auth.strategy.token.get()}};this.$axios.get(this.page,c).then((function(t){r.page=t.data.next,t.data.results.forEach((function(t){t.sender!=r.loggedInUser.username&&r.notifications.push(t)})),r.notifications=Object(o.a)(new Map(r.notifications.map((function(t){return[t.id,t]}))).values())})).catch((function(t){console.log("errror",t)}))}}},data:function(){return{page:"",looploader:[1,1,1,1,1,1,1,1,1,1,1],loading:!0,firstLoad:!0,notifications:[]}}},y=(n(874),n(20)),x=n(23),w=n.n(x),j=n(595),k=n(198),C=n(597),O=n(191),V=n(128),$=n(192),S=n(129),I=n(193),L=n(17),N=n(601),P=n(197),A=n(602),D=n(205),E=n.n(D),R=n(84),component=Object(y.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-container",{staticClass:"background",staticStyle:{"max-width":"1072px"}},[n("h2",{staticClass:"my-md-2 font-weight-light"},[t._v("Notifications")]),t._v(" "),t.firstLoad?t._e():n("div",[n("v-list",{staticClass:"background",attrs:{"two-line":""}},[n("v-subheader",[t._v("New")]),t._v(" "),t._l(t.filteredNotifications,(function(e){return n("v-list-item",{key:e.index,on:{click:function(n){return t.seen(e)}}},[n("div",[e.artist_metadata.thumb?n("v-list-item-avatar",[n("img",{attrs:{src:e.artist_metadata.thumb,alt:"img"}})]):n("v-list-item-avatar",{attrs:{color:"blue"}},[n("v-icon",{attrs:{dark:""}},[t._v("\n                    mdi-account-circle\n                ")])],1)],1),t._v(" "),1==e.notification_context?n("v-list-item-content",[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(o){var r=o.on,c=o.attrs;return[n("v-list-item-subtitle",t._g(t._b({},"v-list-item-subtitle",c,!1),r),[t._v(" "+t._s(t.moment(e.time)))])]}}],null,!0)},[t._v(" "),n("span",[t._v(t._s(t.exactmoment(e.time)))])]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has tagged you as a teacher.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has liked your post.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your post.")]):t._e()],1):t._e(),t._v(" "),2==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has added a video.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has reacted on your video.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your video.")]):t._e()],1):t._e(),t._v(" "),3==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has mentioned you in a video.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has reacted on your tagged video.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your tagged video.")]):t._e()],1):t._e(),t._v(" "),4==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has sent you a private message.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has liked your private message.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your private message.")]):t._e()],1):t._e(),t._v(" "),5==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has tagged you in an event.")]):t._e()],1):t._e()],1)}))],2),t._v(" "),n("v-divider"),t._v(" "),n("v-list",{staticClass:"background",attrs:{"two-line":""}},[n("v-subheader",[t._v("Earlier")]),t._v(" "),t._l(t.filteredNotificationsOld,(function(e){return n("v-list-item",{key:e.index,on:{click:function(n){return t.opene1t1(e)}}},[e.artist_metadata.thumb?n("v-list-item-avatar",[n("img",{attrs:{src:e.artist_metadata.thumb,alt:"img"}})]):n("v-list-item-avatar",{attrs:{color:"blue"}},[n("v-icon",{attrs:{dark:""}},[t._v("\n                    mdi-account-circle\n                ")])],1),t._v(" "),1==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has tagged you as a teacher.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has liked your post.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your post.")]):t._e()],1):t._e(),t._v(" "),2==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has added a video.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has reacted on your video.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your video.")]):t._e()],1):t._e(),t._v(" "),3==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has tagged you in a video.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has reacted on your tagged video.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your tagged video.")]):t._e()],1):t._e(),t._v(" "),4==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has sent you a private message.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has liked your private message.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your private message.")]):t._e()],1):t._e(),t._v(" "),5==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has tagged you in an event.")]):t._e()],1):t._e()],1)}))],2)],1)]),t._v(" "),t.firstLoad?n("v-container",{staticClass:"background",staticStyle:{"max-width":"1072px"}},t._l(this.looploader,(function(e){return n("div",{key:e.index},[n("v-skeleton-loader",{staticClass:"ma-1",attrs:{loading:t.loading,type:"list-item-avatar"}})],1)})),0):t._e(),t._v(" "),n("v-card",{directives:[{name:"intersect",rawName:"v-intersect",value:t.infiniteScrolling,expression:"infiniteScrolling"}]})],1)}),[],!1,null,"d428f14a",null);e.default=component.exports;w()(component,{VApp:j.a,VCard:k.a,VContainer:C.a,VDivider:O.a,VIcon:V.a,VList:$.a,VListItem:S.a,VListItemAvatar:I.a,VListItemContent:L.a,VListItemSubtitle:L.b,VListItemTitle:L.c,VSkeletonLoader:N.a,VSubheader:P.a,VTooltip:A.a}),E()(component,{Intersect:R.a})}}]);