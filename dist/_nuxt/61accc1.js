(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{623:function(t,e,n){var map={"./af":476,"./af.js":476,"./ar":477,"./ar-dz":478,"./ar-dz.js":478,"./ar-kw":479,"./ar-kw.js":479,"./ar-ly":480,"./ar-ly.js":480,"./ar-ma":481,"./ar-ma.js":481,"./ar-sa":482,"./ar-sa.js":482,"./ar-tn":483,"./ar-tn.js":483,"./ar.js":477,"./az":484,"./az.js":484,"./be":485,"./be.js":485,"./bg":486,"./bg.js":486,"./bm":487,"./bm.js":487,"./bn":488,"./bn-bd":489,"./bn-bd.js":489,"./bn.js":488,"./bo":490,"./bo.js":490,"./br":491,"./br.js":491,"./bs":492,"./bs.js":492,"./ca":493,"./ca.js":493,"./cs":494,"./cs.js":494,"./cv":495,"./cv.js":495,"./cy":496,"./cy.js":496,"./da":497,"./da.js":497,"./de":498,"./de-at":499,"./de-at.js":499,"./de-ch":500,"./de-ch.js":500,"./de.js":498,"./dv":501,"./dv.js":501,"./el":502,"./el.js":502,"./en-au":503,"./en-au.js":503,"./en-ca":504,"./en-ca.js":504,"./en-gb":505,"./en-gb.js":505,"./en-ie":506,"./en-ie.js":506,"./en-il":507,"./en-il.js":507,"./en-in":508,"./en-in.js":508,"./en-nz":509,"./en-nz.js":509,"./en-sg":510,"./en-sg.js":510,"./eo":511,"./eo.js":511,"./es":512,"./es-do":513,"./es-do.js":513,"./es-mx":514,"./es-mx.js":514,"./es-us":515,"./es-us.js":515,"./es.js":512,"./et":516,"./et.js":516,"./eu":517,"./eu.js":517,"./fa":518,"./fa.js":518,"./fi":519,"./fi.js":519,"./fil":520,"./fil.js":520,"./fo":521,"./fo.js":521,"./fr":522,"./fr-ca":523,"./fr-ca.js":523,"./fr-ch":524,"./fr-ch.js":524,"./fr.js":522,"./fy":525,"./fy.js":525,"./ga":526,"./ga.js":526,"./gd":527,"./gd.js":527,"./gl":528,"./gl.js":528,"./gom-deva":529,"./gom-deva.js":529,"./gom-latn":530,"./gom-latn.js":530,"./gu":531,"./gu.js":531,"./he":532,"./he.js":532,"./hi":533,"./hi.js":533,"./hr":534,"./hr.js":534,"./hu":535,"./hu.js":535,"./hy-am":536,"./hy-am.js":536,"./id":537,"./id.js":537,"./is":538,"./is.js":538,"./it":539,"./it-ch":540,"./it-ch.js":540,"./it.js":539,"./ja":541,"./ja.js":541,"./jv":542,"./jv.js":542,"./ka":543,"./ka.js":543,"./kk":544,"./kk.js":544,"./km":545,"./km.js":545,"./kn":546,"./kn.js":546,"./ko":547,"./ko.js":547,"./ku":548,"./ku.js":548,"./ky":549,"./ky.js":549,"./lb":550,"./lb.js":550,"./lo":551,"./lo.js":551,"./lt":552,"./lt.js":552,"./lv":553,"./lv.js":553,"./me":554,"./me.js":554,"./mi":555,"./mi.js":555,"./mk":556,"./mk.js":556,"./ml":557,"./ml.js":557,"./mn":558,"./mn.js":558,"./mr":559,"./mr.js":559,"./ms":560,"./ms-my":561,"./ms-my.js":561,"./ms.js":560,"./mt":562,"./mt.js":562,"./my":563,"./my.js":563,"./nb":564,"./nb.js":564,"./ne":565,"./ne.js":565,"./nl":566,"./nl-be":567,"./nl-be.js":567,"./nl.js":566,"./nn":568,"./nn.js":568,"./oc-lnc":569,"./oc-lnc.js":569,"./pa-in":570,"./pa-in.js":570,"./pl":571,"./pl.js":571,"./pt":572,"./pt-br":573,"./pt-br.js":573,"./pt.js":572,"./ro":574,"./ro.js":574,"./ru":575,"./ru.js":575,"./sd":576,"./sd.js":576,"./se":577,"./se.js":577,"./si":578,"./si.js":578,"./sk":579,"./sk.js":579,"./sl":580,"./sl.js":580,"./sq":581,"./sq.js":581,"./sr":582,"./sr-cyrl":583,"./sr-cyrl.js":583,"./sr.js":582,"./ss":584,"./ss.js":584,"./sv":585,"./sv.js":585,"./sw":586,"./sw.js":586,"./ta":587,"./ta.js":587,"./te":588,"./te.js":588,"./tet":589,"./tet.js":589,"./tg":590,"./tg.js":590,"./th":591,"./th.js":591,"./tk":592,"./tk.js":592,"./tl-ph":593,"./tl-ph.js":593,"./tlh":594,"./tlh.js":594,"./tr":595,"./tr.js":595,"./tzl":596,"./tzl.js":596,"./tzm":597,"./tzm-latn":598,"./tzm-latn.js":598,"./tzm.js":597,"./ug-cn":599,"./ug-cn.js":599,"./uk":600,"./uk.js":600,"./ur":601,"./ur.js":601,"./uz":602,"./uz-latn":603,"./uz-latn.js":603,"./uz.js":602,"./vi":604,"./vi.js":604,"./x-pseudo":605,"./x-pseudo.js":605,"./yo":606,"./yo.js":606,"./zh-cn":607,"./zh-cn.js":607,"./zh-hk":608,"./zh-hk.js":608,"./zh-mo":609,"./zh-mo.js":609,"./zh-tw":610,"./zh-tw.js":610};function o(t){var e=r(t);return n(e)}function r(t){if(!n.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}o.keys=function(){return Object.keys(map)},o.resolve=r,t.exports=o,o.id=623},768:function(t,e,n){var content=n(875);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(13).default)("5b920054",content,!0,{sourceMap:!1})},874:function(t,e,n){"use strict";n(768)},875:function(t,e,n){(e=n(12)(!1)).push([t.i,".wrap-text[data-v-d428f14a]{white-space:normal}",""]),t.exports=e},937:function(t,e,n){"use strict";n.r(e);n(10),n(9),n(8),n(46),n(43),n(138),n(6),n(5);var o=n(27),r=(n(69),n(25)),c=(n(7),n(1)),l=n(38),v=n(464),_=n.n(v),m=n(66);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function j(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={middleware:"check_auth",computed:j(j({},Object(l.c)(["loggedInUser","isAuthenticated"])),{},{filteredNotifications:function(){if(this.notifications)return this.notifications.filter((function(t){return 0==t.is_seen}))},filteredNotificationsOld:function(){if(this.notifications)return this.notifications.filter((function(t){return 1==t.is_seen}))}}),created:function(){this.isAuthenticated&&this.getnotifications()},methods:{moment:function(t){return _()(t).fromNow()},exactmoment:function(t){return _()(t).format("lll")},getnotifications:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={headers:{"content-type":"multipart/form-data",Authorization:t.$auth.strategy.token.get()}},e.next=4,m.a.getNotificationsSharing(t.loggedInUser.username,n);case 4:o=e.sent,t.notifications=o.data.results,t.notifications=t.notifications.filter((function(e){return e.sender!=t.loggedInUser.username})),t.page=o.data.next,t.firstLoad=!1,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},seen:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var o,r,c,l,i,form;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.e1t1object?e.$router.push("/e1t1/"+t.e1t1object):t.guestobject?e.$router.push("/events/"+t.guestobject.event):t.cookingobject&&e.$router.push("/whatiscooking/"+t.cookingobject),o=e.filteredNotifications,r=[],t.e1t1object)r=o.filter((function(e){return e.e1t1object==t.e1t1object}));else if(t.guestobject&&t.guestobject.event)for(c=0;c<o.length;c++)o[c].guestobject&&o[c].guestobject.event&&o[c].guestobject.event==t.guestobject.event&&r.push(o[c]);else t.cookingobject&&(r=o.filter((function(e){return e.cookingobject==t.cookingobject})));l={"content-type":"multipart/form-data",headers:{Authorization:e.$auth.strategy.token.get()}},n.prev=5,i=0;case 7:if(!(i<r.length)){n.next=15;break}return(form=new FormData).append("is_seen","true"),n.next=12,e.$axios.$put("/v1/notifications/e1t1/"+r[i].id,form,l);case 12:i++,n.next=7;break;case 15:n.next=20;break;case 17:n.prev=17,n.t0=n.catch(5),console.log("error..",n.t0.response);case 20:e.$store.dispatch("check_notifications");case 21:case"end":return n.stop()}}),n,null,[[5,17]])})))()},opene1t1:function(t){console.log(t),t.e1t1object?this.$router.push("/e1t1/"+t.e1t1object):t.cookingobject?this.$router.push("/whatiscooking/"+t.cookingobject):t.guestobject&&this.$router.push("/events/"+t.guestobject.event)},infiniteScrolling:function(t,e,n){var r=this;if(this.page){var c={headers:{"content-type":"multipart/form-data",Authorization:this.$auth.strategy.token.get()}};this.$axios.get(this.page,c).then((function(t){r.page=t.data.next,t.data.results.forEach((function(t){t.sender!=r.loggedInUser.username&&r.notifications.push(t)})),r.notifications=Object(o.a)(new Map(r.notifications.map((function(t){return[t.id,t]}))).values())})).catch((function(t){console.log("errror",t)}))}}},data:function(){return{page:"",looploader:[1,1,1,1,1,1,1,1,1,1,1],loading:!0,firstLoad:!0,notifications:[]}}},h=(n(874),n(20)),y=n(22),k=n.n(y),x=n(450),w=n(204),C=n(452),O=n(195),z=n(124),V=n(196),$=n(125),L=n(197),N=n(21),S=n(622),I=n(201),D=n(637),P=n(470),A=n.n(P),E=n(111),component=Object(h.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-container",{staticClass:"background",staticStyle:{"max-width":"1072px"}},[n("h2",{staticClass:"my-md-2 font-weight-light"},[t._v("Notifications")]),t._v(" "),t.firstLoad?t._e():n("div",[n("v-list",{staticClass:"background",attrs:{"two-line":""}},[n("v-subheader",[t._v("New")]),t._v(" "),t._l(t.filteredNotifications,(function(e){return n("v-list-item",{key:e.index,on:{click:function(n){return t.seen(e)}}},[n("div",[e.artist_metadata.thumb?n("v-list-item-avatar",[n("img",{attrs:{src:e.artist_metadata.thumb,alt:"img"}})]):n("v-list-item-avatar",{attrs:{color:"blue"}},[n("v-icon",{attrs:{dark:""}},[t._v("\n                    mdi-account-circle\n                ")])],1)],1),t._v(" "),1==e.notification_context?n("v-list-item-content",[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(o){var r=o.on,c=o.attrs;return[n("v-list-item-subtitle",t._g(t._b({},"v-list-item-subtitle",c,!1),r),[t._v(" "+t._s(t.moment(e.time)))])]}}],null,!0)},[t._v(" "),n("span",[t._v(t._s(t.exactmoment(e.time)))])]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has tagged you as a teacher.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has liked your post.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your post.")]):t._e()],1):t._e(),t._v(" "),2==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has added a video.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has reacted on your video.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your video.")]):t._e()],1):t._e(),t._v(" "),3==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has mentioned you in a video.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has reacted on your tagged video.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your tagged video.")]):t._e()],1):t._e(),t._v(" "),4==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has sent you a private message.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has liked your private message.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your private message.")]):t._e()],1):t._e(),t._v(" "),5==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has tagged you in an event.")]):t._e()],1):t._e()],1)}))],2),t._v(" "),n("v-divider"),t._v(" "),n("v-list",{staticClass:"background",attrs:{"two-line":""}},[n("v-subheader",[t._v("Earlier")]),t._v(" "),t._l(t.filteredNotificationsOld,(function(e){return n("v-list-item",{key:e.index,on:{click:function(n){return t.opene1t1(e)}}},[e.artist_metadata.thumb?n("v-list-item-avatar",[n("img",{attrs:{src:e.artist_metadata.thumb,alt:"img"}})]):n("v-list-item-avatar",{attrs:{color:"blue"}},[n("v-icon",{attrs:{dark:""}},[t._v("\n                    mdi-account-circle\n                ")])],1),t._v(" "),1==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has tagged you as a teacher.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has liked your post.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your post.")]):t._e()],1):t._e(),t._v(" "),2==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has added a video.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has reacted on your video.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your video.")]):t._e()],1):t._e(),t._v(" "),3==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has tagged you in a video.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has reacted on your tagged video.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your tagged video.")]):t._e()],1):t._e(),t._v(" "),4==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has sent you a private message.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has liked your private message.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your private message.")]):t._e()],1):t._e(),t._v(" "),5==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has tagged you in an event.")]):t._e()],1):t._e()],1)}))],2)],1)]),t._v(" "),t.firstLoad?n("v-container",{staticClass:"background",staticStyle:{"max-width":"1072px"}},t._l(this.looploader,(function(e){return n("div",{key:e.index},[n("v-skeleton-loader",{staticClass:"ma-1",attrs:{loading:t.loading,type:"list-item-avatar"}})],1)})),0):t._e(),t._v(" "),n("v-card",{directives:[{name:"intersect",rawName:"v-intersect",value:t.infiniteScrolling,expression:"infiniteScrolling"}]})],1)}),[],!1,null,"d428f14a",null);e.default=component.exports;k()(component,{VApp:x.a,VCard:w.a,VContainer:C.a,VDivider:O.a,VIcon:z.a,VList:V.a,VListItem:$.a,VListItemAvatar:L.a,VListItemContent:N.a,VListItemSubtitle:N.b,VListItemTitle:N.c,VSkeletonLoader:S.a,VSubheader:I.a,VTooltip:D.a}),A()(component,{Intersect:E.a})}}]);