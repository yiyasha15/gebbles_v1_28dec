(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{620:function(t,e,n){var map={"./af":471,"./af.js":471,"./ar":472,"./ar-dz":473,"./ar-dz.js":473,"./ar-kw":474,"./ar-kw.js":474,"./ar-ly":475,"./ar-ly.js":475,"./ar-ma":476,"./ar-ma.js":476,"./ar-sa":477,"./ar-sa.js":477,"./ar-tn":478,"./ar-tn.js":478,"./ar.js":472,"./az":479,"./az.js":479,"./be":480,"./be.js":480,"./bg":481,"./bg.js":481,"./bm":482,"./bm.js":482,"./bn":483,"./bn-bd":484,"./bn-bd.js":484,"./bn.js":483,"./bo":485,"./bo.js":485,"./br":486,"./br.js":486,"./bs":487,"./bs.js":487,"./ca":488,"./ca.js":488,"./cs":489,"./cs.js":489,"./cv":490,"./cv.js":490,"./cy":491,"./cy.js":491,"./da":492,"./da.js":492,"./de":493,"./de-at":494,"./de-at.js":494,"./de-ch":495,"./de-ch.js":495,"./de.js":493,"./dv":496,"./dv.js":496,"./el":497,"./el.js":497,"./en-au":498,"./en-au.js":498,"./en-ca":499,"./en-ca.js":499,"./en-gb":500,"./en-gb.js":500,"./en-ie":501,"./en-ie.js":501,"./en-il":502,"./en-il.js":502,"./en-in":503,"./en-in.js":503,"./en-nz":504,"./en-nz.js":504,"./en-sg":505,"./en-sg.js":505,"./eo":506,"./eo.js":506,"./es":507,"./es-do":508,"./es-do.js":508,"./es-mx":509,"./es-mx.js":509,"./es-us":510,"./es-us.js":510,"./es.js":507,"./et":511,"./et.js":511,"./eu":512,"./eu.js":512,"./fa":513,"./fa.js":513,"./fi":514,"./fi.js":514,"./fil":515,"./fil.js":515,"./fo":516,"./fo.js":516,"./fr":517,"./fr-ca":518,"./fr-ca.js":518,"./fr-ch":519,"./fr-ch.js":519,"./fr.js":517,"./fy":520,"./fy.js":520,"./ga":521,"./ga.js":521,"./gd":522,"./gd.js":522,"./gl":523,"./gl.js":523,"./gom-deva":524,"./gom-deva.js":524,"./gom-latn":525,"./gom-latn.js":525,"./gu":526,"./gu.js":526,"./he":527,"./he.js":527,"./hi":528,"./hi.js":528,"./hr":529,"./hr.js":529,"./hu":530,"./hu.js":530,"./hy-am":531,"./hy-am.js":531,"./id":532,"./id.js":532,"./is":533,"./is.js":533,"./it":534,"./it-ch":535,"./it-ch.js":535,"./it.js":534,"./ja":536,"./ja.js":536,"./jv":537,"./jv.js":537,"./ka":538,"./ka.js":538,"./kk":539,"./kk.js":539,"./km":540,"./km.js":540,"./kn":541,"./kn.js":541,"./ko":542,"./ko.js":542,"./ku":543,"./ku.js":543,"./ky":544,"./ky.js":544,"./lb":545,"./lb.js":545,"./lo":546,"./lo.js":546,"./lt":547,"./lt.js":547,"./lv":548,"./lv.js":548,"./me":549,"./me.js":549,"./mi":550,"./mi.js":550,"./mk":551,"./mk.js":551,"./ml":552,"./ml.js":552,"./mn":553,"./mn.js":553,"./mr":554,"./mr.js":554,"./ms":555,"./ms-my":556,"./ms-my.js":556,"./ms.js":555,"./mt":557,"./mt.js":557,"./my":558,"./my.js":558,"./nb":559,"./nb.js":559,"./ne":560,"./ne.js":560,"./nl":561,"./nl-be":562,"./nl-be.js":562,"./nl.js":561,"./nn":563,"./nn.js":563,"./oc-lnc":564,"./oc-lnc.js":564,"./pa-in":565,"./pa-in.js":565,"./pl":566,"./pl.js":566,"./pt":567,"./pt-br":568,"./pt-br.js":568,"./pt.js":567,"./ro":569,"./ro.js":569,"./ru":570,"./ru.js":570,"./sd":571,"./sd.js":571,"./se":572,"./se.js":572,"./si":573,"./si.js":573,"./sk":574,"./sk.js":574,"./sl":575,"./sl.js":575,"./sq":576,"./sq.js":576,"./sr":577,"./sr-cyrl":578,"./sr-cyrl.js":578,"./sr.js":577,"./ss":579,"./ss.js":579,"./sv":580,"./sv.js":580,"./sw":581,"./sw.js":581,"./ta":582,"./ta.js":582,"./te":583,"./te.js":583,"./tet":584,"./tet.js":584,"./tg":585,"./tg.js":585,"./th":586,"./th.js":586,"./tk":587,"./tk.js":587,"./tl-ph":588,"./tl-ph.js":588,"./tlh":589,"./tlh.js":589,"./tr":590,"./tr.js":590,"./tzl":591,"./tzl.js":591,"./tzm":592,"./tzm-latn":593,"./tzm-latn.js":593,"./tzm.js":592,"./ug-cn":594,"./ug-cn.js":594,"./uk":595,"./uk.js":595,"./ur":596,"./ur.js":596,"./uz":597,"./uz-latn":598,"./uz-latn.js":598,"./uz.js":597,"./vi":599,"./vi.js":599,"./x-pseudo":600,"./x-pseudo.js":600,"./yo":601,"./yo.js":601,"./zh-cn":602,"./zh-cn.js":602,"./zh-hk":603,"./zh-hk.js":603,"./zh-mo":604,"./zh-mo.js":604,"./zh-tw":605,"./zh-tw.js":605};function o(t){var e=r(t);return n(e)}function r(t){if(!n.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}o.keys=function(){return Object.keys(map)},o.resolve=r,t.exports=o,o.id=620},756:function(t,e,n){var content=n(864);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(12).default)("5b920054",content,!0,{sourceMap:!1})},863:function(t,e,n){"use strict";n(756)},864:function(t,e,n){(e=n(11)(!1)).push([t.i,".wrap-text[data-v-d428f14a]{white-space:normal}",""]),t.exports=e},920:function(t,e,n){"use strict";n.r(e);n(10),n(8),n(7),n(39),n(135),n(6),n(5);var o=n(28),r=(n(66),n(25)),c=n(1),l=n(42),v=n(459),_=n.n(v),m=n(63);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function j(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={middleware:"check_auth",computed:j(j({},Object(l.c)(["loggedInUser","isAuthenticated"])),{},{filteredNotifications:function(){if(this.notifications)return this.notifications.filter((function(t){return 0==t.is_seen}))},filteredNotificationsOld:function(){if(this.notifications)return this.notifications.filter((function(t){return 1==t.is_seen}))}}),created:function(){this.isAuthenticated&&this.getnotifications()},methods:{moment:function(t){return _()(t).fromNow()},exactmoment:function(t){return _()(t).format("lll")},getnotifications:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={headers:{"content-type":"multipart/form-data",Authorization:t.$auth.strategy.token.get()}},e.next=4,m.a.getNotificationsSharing(t.loggedInUser.username,n);case 4:o=e.sent,t.notifications=o.data.results,t.notifications=t.notifications.filter((function(e){return e.sender!=t.loggedInUser.username})),t.page=o.data.next,t.firstLoad=!1,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},seen:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var o,r,c,l,i,form;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.e1t1object?e.$router.push("/e1t1/"+t.e1t1object):t.guestobject?e.$router.push("/events/"+t.guestobject.event):t.cookingobject&&e.$router.push("/whatiscooking/"+t.cookingobject),o=e.filteredNotifications,r=[],t.e1t1object)r=o.filter((function(e){return e.e1t1object==t.e1t1object}));else if(t.guestobject&&t.guestobject.event)for(c=0;c<o.length;c++)o[c].guestobject&&o[c].guestobject.event&&o[c].guestobject.event==t.guestobject.event&&r.push(o[c]);else t.cookingobject&&(r=o.filter((function(e){return e.cookingobject==t.cookingobject})));l={"content-type":"multipart/form-data",headers:{Authorization:e.$auth.strategy.token.get()}},n.prev=5,i=0;case 7:if(!(i<r.length)){n.next=15;break}return(form=new FormData).append("is_seen","true"),n.next=12,e.$axios.$put("/v1/notifications/e1t1/"+r[i].id,form,l);case 12:i++,n.next=7;break;case 15:n.next=20;break;case 17:n.prev=17,n.t0=n.catch(5),console.log("error..",n.t0.response);case 20:e.$store.dispatch("check_notifications");case 21:case"end":return n.stop()}}),n,null,[[5,17]])})))()},opene1t1:function(t){console.log(t),t.e1t1object?this.$router.push("/e1t1/"+t.e1t1object):t.cookingobject?this.$router.push("/whatiscooking/"+t.cookingobject):t.guestobject&&this.$router.push("/events/"+t.guestobject.event)},infiniteScrolling:function(t,e,n){var r=this;if(this.page){var c={headers:{"content-type":"multipart/form-data",Authorization:this.$auth.strategy.token.get()}};this.$axios.get(this.page,c).then((function(t){r.page=t.data.next,t.data.results.forEach((function(t){t.sender!=r.loggedInUser.username&&r.notifications.push(t)})),r.notifications=Object(o.a)(new Map(r.notifications.map((function(t){return[t.id,t]}))).values())})).catch((function(t){console.log("errror",t)}))}}},data:function(){return{page:"",looploader:[1,1,1,1,1,1,1,1,1,1,1],loading:!0,firstLoad:!0,notifications:[]}}},h=(n(863),n(22)),y=n(27),k=n.n(y),x=n(445),w=n(199),C=n(447),O=n(196),z=n(121),V=n(190),$=n(122),L=n(192),N=n(20),S=n(617),I=n(197),D=n(632),P=n(463),A=n.n(P),E=n(108),component=Object(h.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-container",{staticClass:"background",staticStyle:{"max-width":"1072px"}},[n("h2",{staticClass:"my-md-2 font-weight-light"},[t._v("Notifications")]),t._v(" "),t.firstLoad?t._e():n("div",[n("v-list",{staticClass:"background",attrs:{"two-line":""}},[n("v-subheader",[t._v("New")]),t._v(" "),t._l(t.filteredNotifications,(function(e){return n("v-list-item",{key:e.index,on:{click:function(n){return t.seen(e)}}},[n("div",[e.artist_metadata.thumb?n("v-list-item-avatar",[n("img",{attrs:{src:e.artist_metadata.thumb,alt:"img"}})]):n("v-list-item-avatar",{attrs:{color:"blue"}},[n("v-icon",{attrs:{dark:""}},[t._v("\n                    mdi-account-circle\n                ")])],1)],1),t._v(" "),1==e.notification_context?n("v-list-item-content",[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(o){var r=o.on,c=o.attrs;return[n("v-list-item-subtitle",t._g(t._b({},"v-list-item-subtitle",c,!1),r),[t._v(" "+t._s(t.moment(e.time)))])]}}],null,!0)},[t._v(" "),n("span",[t._v(t._s(t.exactmoment(e.time)))])]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has tagged you as a teacher.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has liked your post.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your post.")]):t._e()],1):t._e(),t._v(" "),2==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has added a video.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has reacted on your video.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your video.")]):t._e()],1):t._e(),t._v(" "),3==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has mentioned you in a video.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has reacted on your tagged video.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your tagged video.")]):t._e()],1):t._e(),t._v(" "),4==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has sent you a private message.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has liked your private message.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your private message.")]):t._e()],1):t._e(),t._v(" "),5==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has tagged you in an event.")]):t._e()],1):t._e()],1)}))],2),t._v(" "),n("v-divider"),t._v(" "),n("v-list",{staticClass:"background",attrs:{"two-line":""}},[n("v-subheader",[t._v("Earlier")]),t._v(" "),t._l(t.filteredNotificationsOld,(function(e){return n("v-list-item",{key:e.index,on:{click:function(n){return t.opene1t1(e)}}},[e.artist_metadata.thumb?n("v-list-item-avatar",[n("img",{attrs:{src:e.artist_metadata.thumb,alt:"img"}})]):n("v-list-item-avatar",{attrs:{color:"blue"}},[n("v-icon",{attrs:{dark:""}},[t._v("\n                    mdi-account-circle\n                ")])],1),t._v(" "),1==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has tagged you as a teacher.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has liked your post.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your post.")]):t._e()],1):t._e(),t._v(" "),2==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has added a video.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has reacted on your video.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your video.")]):t._e()],1):t._e(),t._v(" "),3==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has tagged you in a video.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has reacted on your tagged video.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your tagged video.")]):t._e()],1):t._e(),t._v(" "),4==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has sent you a private message.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has liked your private message.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your private message.")]):t._e()],1):t._e(),t._v(" "),5==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has tagged you in an event.")]):t._e()],1):t._e()],1)}))],2)],1)]),t._v(" "),t.firstLoad?n("v-container",{staticClass:"background",staticStyle:{"max-width":"1072px"}},t._l(this.looploader,(function(e){return n("div",{key:e.index},[n("v-skeleton-loader",{staticClass:"ma-1",attrs:{loading:t.loading,type:"list-item-avatar"}})],1)})),0):t._e(),t._v(" "),n("v-card",{directives:[{name:"intersect",rawName:"v-intersect",value:t.infiniteScrolling,expression:"infiniteScrolling"}]})],1)}),[],!1,null,"d428f14a",null);e.default=component.exports;k()(component,{VApp:x.a,VCard:w.a,VContainer:C.a,VDivider:O.a,VIcon:z.a,VList:V.a,VListItem:$.a,VListItemAvatar:L.a,VListItemContent:N.a,VListItemSubtitle:N.b,VListItemTitle:N.c,VSkeletonLoader:S.a,VSubheader:I.a,VTooltip:D.a}),A()(component,{Intersect:E.a})}}]);