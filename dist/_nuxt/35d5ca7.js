(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{621:function(t,e,n){var map={"./af":472,"./af.js":472,"./ar":473,"./ar-dz":474,"./ar-dz.js":474,"./ar-kw":475,"./ar-kw.js":475,"./ar-ly":476,"./ar-ly.js":476,"./ar-ma":477,"./ar-ma.js":477,"./ar-sa":478,"./ar-sa.js":478,"./ar-tn":479,"./ar-tn.js":479,"./ar.js":473,"./az":480,"./az.js":480,"./be":481,"./be.js":481,"./bg":482,"./bg.js":482,"./bm":483,"./bm.js":483,"./bn":484,"./bn-bd":485,"./bn-bd.js":485,"./bn.js":484,"./bo":486,"./bo.js":486,"./br":487,"./br.js":487,"./bs":488,"./bs.js":488,"./ca":489,"./ca.js":489,"./cs":490,"./cs.js":490,"./cv":491,"./cv.js":491,"./cy":492,"./cy.js":492,"./da":493,"./da.js":493,"./de":494,"./de-at":495,"./de-at.js":495,"./de-ch":496,"./de-ch.js":496,"./de.js":494,"./dv":497,"./dv.js":497,"./el":498,"./el.js":498,"./en-au":499,"./en-au.js":499,"./en-ca":500,"./en-ca.js":500,"./en-gb":501,"./en-gb.js":501,"./en-ie":502,"./en-ie.js":502,"./en-il":503,"./en-il.js":503,"./en-in":504,"./en-in.js":504,"./en-nz":505,"./en-nz.js":505,"./en-sg":506,"./en-sg.js":506,"./eo":507,"./eo.js":507,"./es":508,"./es-do":509,"./es-do.js":509,"./es-mx":510,"./es-mx.js":510,"./es-us":511,"./es-us.js":511,"./es.js":508,"./et":512,"./et.js":512,"./eu":513,"./eu.js":513,"./fa":514,"./fa.js":514,"./fi":515,"./fi.js":515,"./fil":516,"./fil.js":516,"./fo":517,"./fo.js":517,"./fr":518,"./fr-ca":519,"./fr-ca.js":519,"./fr-ch":520,"./fr-ch.js":520,"./fr.js":518,"./fy":521,"./fy.js":521,"./ga":522,"./ga.js":522,"./gd":523,"./gd.js":523,"./gl":524,"./gl.js":524,"./gom-deva":525,"./gom-deva.js":525,"./gom-latn":526,"./gom-latn.js":526,"./gu":527,"./gu.js":527,"./he":528,"./he.js":528,"./hi":529,"./hi.js":529,"./hr":530,"./hr.js":530,"./hu":531,"./hu.js":531,"./hy-am":532,"./hy-am.js":532,"./id":533,"./id.js":533,"./is":534,"./is.js":534,"./it":535,"./it-ch":536,"./it-ch.js":536,"./it.js":535,"./ja":537,"./ja.js":537,"./jv":538,"./jv.js":538,"./ka":539,"./ka.js":539,"./kk":540,"./kk.js":540,"./km":541,"./km.js":541,"./kn":542,"./kn.js":542,"./ko":543,"./ko.js":543,"./ku":544,"./ku.js":544,"./ky":545,"./ky.js":545,"./lb":546,"./lb.js":546,"./lo":547,"./lo.js":547,"./lt":548,"./lt.js":548,"./lv":549,"./lv.js":549,"./me":550,"./me.js":550,"./mi":551,"./mi.js":551,"./mk":552,"./mk.js":552,"./ml":553,"./ml.js":553,"./mn":554,"./mn.js":554,"./mr":555,"./mr.js":555,"./ms":556,"./ms-my":557,"./ms-my.js":557,"./ms.js":556,"./mt":558,"./mt.js":558,"./my":559,"./my.js":559,"./nb":560,"./nb.js":560,"./ne":561,"./ne.js":561,"./nl":562,"./nl-be":563,"./nl-be.js":563,"./nl.js":562,"./nn":564,"./nn.js":564,"./oc-lnc":565,"./oc-lnc.js":565,"./pa-in":566,"./pa-in.js":566,"./pl":567,"./pl.js":567,"./pt":568,"./pt-br":569,"./pt-br.js":569,"./pt.js":568,"./ro":570,"./ro.js":570,"./ru":571,"./ru.js":571,"./sd":572,"./sd.js":572,"./se":573,"./se.js":573,"./si":574,"./si.js":574,"./sk":575,"./sk.js":575,"./sl":576,"./sl.js":576,"./sq":577,"./sq.js":577,"./sr":578,"./sr-cyrl":579,"./sr-cyrl.js":579,"./sr.js":578,"./ss":580,"./ss.js":580,"./sv":581,"./sv.js":581,"./sw":582,"./sw.js":582,"./ta":583,"./ta.js":583,"./te":584,"./te.js":584,"./tet":585,"./tet.js":585,"./tg":586,"./tg.js":586,"./th":587,"./th.js":587,"./tk":588,"./tk.js":588,"./tl-ph":589,"./tl-ph.js":589,"./tlh":590,"./tlh.js":590,"./tr":591,"./tr.js":591,"./tzl":592,"./tzl.js":592,"./tzm":593,"./tzm-latn":594,"./tzm-latn.js":594,"./tzm.js":593,"./ug-cn":595,"./ug-cn.js":595,"./uk":596,"./uk.js":596,"./ur":597,"./ur.js":597,"./uz":598,"./uz-latn":599,"./uz-latn.js":599,"./uz.js":598,"./vi":600,"./vi.js":600,"./x-pseudo":601,"./x-pseudo.js":601,"./yo":602,"./yo.js":602,"./zh-cn":603,"./zh-cn.js":603,"./zh-hk":604,"./zh-hk.js":604,"./zh-mo":605,"./zh-mo.js":605,"./zh-tw":606,"./zh-tw.js":606};function o(t){var e=r(t);return n(e)}function r(t){if(!n.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}o.keys=function(){return Object.keys(map)},o.resolve=r,t.exports=o,o.id=621},757:function(t,e,n){var content=n(867);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(12).default)("5b920054",content,!0,{sourceMap:!1})},866:function(t,e,n){"use strict";n(757)},867:function(t,e,n){(e=n(11)(!1)).push([t.i,".wrap-text[data-v-d428f14a]{white-space:normal}",""]),t.exports=e},928:function(t,e,n){"use strict";n.r(e);n(9),n(8),n(7),n(40),n(135),n(6),n(5);var o=n(28),r=(n(66),n(26)),c=n(1),l=n(37),v=n(460),_=n.n(v),m=n(63);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function j(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={middleware:"check_auth",computed:j(j({},Object(l.c)(["loggedInUser","isAuthenticated"])),{},{filteredNotifications:function(){if(this.notifications)return this.notifications.filter((function(t){return 0==t.is_seen}))},filteredNotificationsOld:function(){if(this.notifications)return this.notifications.filter((function(t){return 1==t.is_seen}))}}),created:function(){this.isAuthenticated&&this.getnotifications()},methods:{moment:function(t){return _()(t).fromNow()},exactmoment:function(t){return _()(t).format("lll")},getnotifications:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={headers:{"content-type":"multipart/form-data",Authorization:t.$auth.strategy.token.get()}},e.next=4,m.a.getNotificationsSharing(t.loggedInUser.username,n);case 4:o=e.sent,t.notifications=o.data.results,t.notifications=t.notifications.filter((function(e){return e.sender!=t.loggedInUser.username})),t.page=o.data.next,t.firstLoad=!1,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},seen:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var o,r,c,l,i,form;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.e1t1object?e.$router.push("/e1t1/"+t.e1t1object):t.guestobject?e.$router.push("/events/"+t.guestobject.event):t.cookingobject&&e.$router.push("/whatiscooking/"+t.cookingobject),o=e.filteredNotifications,r=[],t.e1t1object)r=o.filter((function(e){return e.e1t1object==t.e1t1object}));else if(t.guestobject&&t.guestobject.event)for(c=0;c<o.length;c++)o[c].guestobject&&o[c].guestobject.event&&o[c].guestobject.event==t.guestobject.event&&r.push(o[c]);else t.cookingobject&&(r=o.filter((function(e){return e.cookingobject==t.cookingobject})));l={"content-type":"multipart/form-data",headers:{Authorization:e.$auth.strategy.token.get()}},n.prev=5,i=0;case 7:if(!(i<r.length)){n.next=15;break}return(form=new FormData).append("is_seen","true"),n.next=12,e.$axios.$put("/v1/notifications/e1t1/"+r[i].id,form,l);case 12:i++,n.next=7;break;case 15:n.next=20;break;case 17:n.prev=17,n.t0=n.catch(5),console.log("error..",n.t0.response);case 20:e.$store.dispatch("check_notifications");case 21:case"end":return n.stop()}}),n,null,[[5,17]])})))()},opene1t1:function(t){console.log(t),t.e1t1object?this.$router.push("/e1t1/"+t.e1t1object):t.cookingobject?this.$router.push("/whatiscooking/"+t.cookingobject):t.guestobject&&this.$router.push("/events/"+t.guestobject.event)},infiniteScrolling:function(t,e,n){var r=this;if(this.page){var c={headers:{"content-type":"multipart/form-data",Authorization:this.$auth.strategy.token.get()}};this.$axios.get(this.page,c).then((function(t){r.page=t.data.next,t.data.results.forEach((function(t){t.sender!=r.loggedInUser.username&&r.notifications.push(t)})),r.notifications=Object(o.a)(new Map(r.notifications.map((function(t){return[t.id,t]}))).values())})).catch((function(t){console.log("errror",t)}))}}},data:function(){return{page:"",looploader:[1,1,1,1,1,1,1,1,1,1,1],loading:!0,firstLoad:!0,notifications:[]}}},h=(n(866),n(20)),y=n(23),k=n.n(y),x=n(446),w=n(199),C=n(448),O=n(196),z=n(121),V=n(190),$=n(122),L=n(192),N=n(21),S=n(618),I=n(197),D=n(633),P=n(466),A=n.n(P),E=n(108),component=Object(h.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-container",{staticClass:"background",staticStyle:{"max-width":"1072px"}},[n("h2",{staticClass:"my-md-2 font-weight-light"},[t._v("Notifications")]),t._v(" "),t.firstLoad?t._e():n("div",[n("v-list",{staticClass:"background",attrs:{"two-line":""}},[n("v-subheader",[t._v("New")]),t._v(" "),t._l(t.filteredNotifications,(function(e){return n("v-list-item",{key:e.index,on:{click:function(n){return t.seen(e)}}},[n("div",[e.artist_metadata.thumb?n("v-list-item-avatar",[n("img",{attrs:{src:e.artist_metadata.thumb,alt:"img"}})]):n("v-list-item-avatar",{attrs:{color:"blue"}},[n("v-icon",{attrs:{dark:""}},[t._v("\n                    mdi-account-circle\n                ")])],1)],1),t._v(" "),1==e.notification_context?n("v-list-item-content",[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(o){var r=o.on,c=o.attrs;return[n("v-list-item-subtitle",t._g(t._b({},"v-list-item-subtitle",c,!1),r),[t._v(" "+t._s(t.moment(e.time)))])]}}],null,!0)},[t._v(" "),n("span",[t._v(t._s(t.exactmoment(e.time)))])]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has tagged you as a teacher.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has liked your post.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your post.")]):t._e()],1):t._e(),t._v(" "),2==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has added a video.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has reacted on your video.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your video.")]):t._e()],1):t._e(),t._v(" "),3==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has mentioned you in a video.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has reacted on your tagged video.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your tagged video.")]):t._e()],1):t._e(),t._v(" "),4==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has sent you a private message.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has liked your private message.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your private message.")]):t._e()],1):t._e(),t._v(" "),5==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has tagged you in an event.")]):t._e()],1):t._e()],1)}))],2),t._v(" "),n("v-divider"),t._v(" "),n("v-list",{staticClass:"background",attrs:{"two-line":""}},[n("v-subheader",[t._v("Earlier")]),t._v(" "),t._l(t.filteredNotificationsOld,(function(e){return n("v-list-item",{key:e.index,on:{click:function(n){return t.opene1t1(e)}}},[e.artist_metadata.thumb?n("v-list-item-avatar",[n("img",{attrs:{src:e.artist_metadata.thumb,alt:"img"}})]):n("v-list-item-avatar",{attrs:{color:"blue"}},[n("v-icon",{attrs:{dark:""}},[t._v("\n                    mdi-account-circle\n                ")])],1),t._v(" "),1==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has tagged you as a teacher.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has liked your post.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your post.")]):t._e()],1):t._e(),t._v(" "),2==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has added a video.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has reacted on your video.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your video.")]):t._e()],1):t._e(),t._v(" "),3==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has tagged you in a video.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has reacted on your tagged video.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your tagged video.")]):t._e()],1):t._e(),t._v(" "),4==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has sent you a private message.")]):t._e(),t._v(" "),2==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has liked your private message.")]):t._e(),t._v(" "),3==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has commented on your private message.")]):t._e()],1):t._e(),t._v(" "),5==e.notification_context?n("v-list-item-content",[n("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.time)))]),t._v(" "),1==e.notification_type?n("v-list-item-title",{staticClass:"wrap-text"},[t._v(t._s(e.sender)+" has tagged you in an event.")]):t._e()],1):t._e()],1)}))],2)],1)]),t._v(" "),t.firstLoad?n("v-container",{staticClass:"background",staticStyle:{"max-width":"1072px"}},t._l(this.looploader,(function(e){return n("div",{key:e.index},[n("v-skeleton-loader",{staticClass:"ma-1",attrs:{loading:t.loading,type:"list-item-avatar"}})],1)})),0):t._e(),t._v(" "),n("v-card",{directives:[{name:"intersect",rawName:"v-intersect",value:t.infiniteScrolling,expression:"infiniteScrolling"}]})],1)}),[],!1,null,"d428f14a",null);e.default=component.exports;k()(component,{VApp:x.a,VCard:w.a,VContainer:C.a,VDivider:O.a,VIcon:z.a,VList:V.a,VListItem:$.a,VListItemAvatar:L.a,VListItemContent:N.a,VListItemSubtitle:N.b,VListItemTitle:N.c,VSkeletonLoader:S.a,VSubheader:I.a,VTooltip:D.a}),A()(component,{Intersect:E.a})}}]);